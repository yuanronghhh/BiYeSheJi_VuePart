{"version":3,"sources":["webpack:///static/js/app.8b43d88bf3e67faf8fb4.js","webpack:///./src/main.js","webpack:///./src/libs/alert.js","webpack:///./src/routers.js","webpack:///./src/vuex/user.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_routers","_routers2","_webpackZepto","_webpackZepto2","_vueRouter","_vueRouter2","_user","_user2","_alert","_alert2","use","ajaxSettings","crossDomain","router","mode","routes","scrollBehavior","to","from","savedPosition","x","y","beforeEach","next","matched","some","record","meta","requiresAuth","state","userInfo","userId","path","query","redirect","fullPath","app","store","$mount","162","Object","defineProperty","value","install","timer","messageAlert","msg","$alert","append","html","addClass","clearTimeout","setTimeout","remove","prototype","$errorHandler","xhr","dataType","error","data","JSON","parse","responseText","message","163","Home","resolve","e","Login","NotFound","template","routers","name","component","164","_vuex","_vuex2","userStore","Store","user_info","getters","getUserInfo","mutations","setUserInfo","actions","_ref","commit"],"mappings":"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","file":"static/js/app.8b43d88bf3e67faf8fb4.js","sourcesContent":["webpackJsonp([8,6],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(156);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _routers = __webpack_require__(163);\n\t\n\tvar _routers2 = _interopRequireDefault(_routers);\n\t\n\tvar _webpackZepto = __webpack_require__(10);\n\t\n\tvar _webpackZepto2 = _interopRequireDefault(_webpackZepto);\n\t\n\tvar _vueRouter = __webpack_require__(193);\n\t\n\tvar _vueRouter2 = _interopRequireDefault(_vueRouter);\n\t\n\tvar _user = __webpack_require__(164);\n\t\n\tvar _user2 = _interopRequireDefault(_user);\n\t\n\tvar _alert = __webpack_require__(162);\n\t\n\tvar _alert2 = _interopRequireDefault(_alert);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_alert2.default);\n\t\n\t_vue2.default.use(_vueRouter2.default);\n\t\n\t_webpackZepto2.default.ajaxSettings.crossDomain = true;\n\t\n\tvar router = new _vueRouter2.default({\n\t  mode: 'history',\n\t  routes: _routers2.default,\n\t  scrollBehavior: function scrollBehavior(to, from, savedPosition) {\n\t    return { x: 0, y: 0 };\n\t  }\n\t});\n\t\n\trouter.beforeEach(function (to, from, next) {\n\t  if (to.matched.some(function (record) {\n\t    return record.meta.requiresAuth;\n\t  })) {\n\t    if (_user2.default.state.userInfo.userId) {\n\t      next();\n\t    } else {\n\t      next({\n\t        path: '/login',\n\t        query: { redirect: to.fullPath }\n\t      });\n\t    }\n\t  } else {\n\t    next();\n\t  }\n\t});\n\t\n\tvar app = new _vue2.default({\n\t  router: router,\n\t  store: _user2.default\n\t});\n\t\n\tapp.$mount('#app');\n\n/***/ },\n\n/***/ 162:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _vue = __webpack_require__(156);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _webpackZepto = __webpack_require__(10);\n\t\n\tvar _webpackZepto2 = _interopRequireDefault(_webpackZepto);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  install: function install() {\n\t    var timer = null;\n\t\n\t    var messageAlert = function messageAlert(msg) {\n\t      var $alert = (0, _webpackZepto2.default)('<div class=\"message-alert\"></div>');\n\t      (0, _webpackZepto2.default)('body').append($alert);\n\t      $alert.html(msg);\n\t      $alert.addClass('alert-show');\n\t      clearTimeout(timer);\n\t      timer = setTimeout(function () {\n\t        (0, _webpackZepto2.default)(\".message-alert\").remove();\n\t      }, 2000);\n\t    };\n\t\n\t    _vue2.default.prototype.$errorHandler = function (xhr, dataType, error) {\n\t      var data = JSON.parse(xhr.responseText);\n\t\n\t      messageAlert(data.message);\n\t    };\n\t\n\t    _vue2.default.prototype.$alert = messageAlert;\n\t  }\n\t};\n\n/***/ },\n\n/***/ 163:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar Home = function Home(resolve) {\n\t  __webpack_require__.e/* nsure */(3, function () {\n\t    resolve(__webpack_require__(158));\n\t  });\n\t};\n\t\n\tvar Login = function Login(resolve) {\n\t  __webpack_require__.e/* nsure */(1, function () {\n\t    resolve(__webpack_require__(160));\n\t  });\n\t};\n\t\n\tvar NotFound = { template: '<p>NotFound</p>' };\n\t\n\tvar routers = [{\n\t  path: '/',\n\t  name: 'home',\n\t  component: Home\n\t}, {\n\t  path: '/login',\n\t  name: 'login',\n\t  component: Login\n\t}, {\n\t  path: '/signup',\n\t  name: 'signup',\n\t  component: function component(resolve) {\n\t    __webpack_require__.e/* nsure */(2, function () {\n\t      resolve(__webpack_require__(161));\n\t    });\n\t  }\n\t}, {\n\t  path: '/items',\n\t  name: 'items',\n\t  component: function component(resolve) {\n\t    __webpack_require__.e/* nsure */(5, function () {\n\t      resolve(__webpack_require__(159));\n\t    });\n\t  }\n\t}, {\n\t  path: '/user',\n\t  name: 'user',\n\t  component: function component(resolve) {\n\t    __webpack_require__.e/* nsure */(0, function () {\n\t      resolve(__webpack_require__(84));\n\t    });\n\t  }\n\t}, {\n\t  path: '/user/:info',\n\t  name: 'user_info',\n\t  component: function component(resolve) {\n\t    __webpack_require__.e/* nsure */(0/* duplicate */, function () {\n\t      resolve(__webpack_require__(84));\n\t    });\n\t  }\n\t}, {\n\t  path: '/item/:id/detail',\n\t  name: 'detail',\n\t  component: function component(resolve) {\n\t    __webpack_require__.e/* nsure */(4, function () {\n\t      resolve(__webpack_require__(157));\n\t    });\n\t  }\n\t}, {\n\t  path: '*',\n\t  component: NotFound\n\t}];\n\t\n\texports.default = routers;\n\n/***/ },\n\n/***/ 164:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _vue = __webpack_require__(156);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _vuex = __webpack_require__(66);\n\t\n\tvar _vuex2 = _interopRequireDefault(_vuex);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_vue2.default.use(_vuex2.default);\n\t\n\tvar userStore = new _vuex2.default.Store({\n\t  state: {\n\t    user_info: {}\n\t  },\n\t  getters: {\n\t    getUserInfo: function getUserInfo(state) {\n\t      return state.user_info;\n\t    }\n\t  },\n\t  mutations: {\n\t    setUserInfo: function setUserInfo(state, user_info) {\n\t      state.user_info = user_info;\n\t    }\n\t  },\n\t  actions: {\n\t    setUserInfo: function setUserInfo(_ref, user_info) {\n\t      var commit = _ref.commit;\n\t\n\t      commit('setUserInfo', user_info);\n\t    }\n\t  }\n\t});\n\t\n\texports.default = userStore;\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/app.8b43d88bf3e67faf8fb4.js","import Vue from 'vue';\nimport routes from './routers';\nimport $ from 'webpack-zepto';\nimport VueRouter from 'vue-router';\nimport store from './vuex/user';\nimport Alert from './libs/alert.js';\n\nVue.use(Alert);\n\nVue.use(VueRouter);\n\n$.ajaxSettings.crossDomain = true;\n\nconst router = new VueRouter({\n  mode: 'history',\n  routes: routes,\n  // 跳转时scroll到顶部\n  scrollBehavior (to, from, savedPosition) {\n    return { x: 0, y: 0 };\n  }\n});\n\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (store.state.userInfo.userId) {\n      next();\n    } else {\n      next({\n        path: '/login',\n        query: { redirect: to.fullPath }\n      });\n    }\n  } else {\n    next();\n  }\n});\n\nconst app = new Vue({\n  router,\n  store\n});\n\napp.$mount('#app');\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Vue from 'vue';\nimport $ from 'webpack-zepto';\n\nexport default {\n  install () {\n    let timer = null;\n\n    /**\n     * 通用alert\n     */\n    var messageAlert = (msg) => {\n      let $alert = $('<div class=\"message-alert\"></div>');\n      $('body').append($alert);\n      $alert.html(msg);\n      $alert.addClass('alert-show');\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        $(\".message-alert\").remove();\n      }, 2000);\n    };\n\n    Vue.prototype.$errorHandler = (xhr, dataType, error) => {\n      var data = JSON.parse(xhr.responseText);\n\n      messageAlert(data.message);\n    };\n\n    Vue.prototype.$alert = messageAlert;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/libs/alert.js","// require.ensure 是 Webpack 的特殊语法，用来设置 code-split point\nconst Home = resolve => {\n  require.ensure(['./views/index.vue'], () => {\n    resolve(require('./views/index.vue'));\n  });\n};\n\nconst Login = resolve => {\n  require.ensure(['./views/login.vue'], () => {\n    resolve(require('./views/login.vue'));\n  });\n};\n\nconst NotFound = {template: '<p>NotFound</p>'};\n\nconst routers = [{\n  path: '/',\n  name: 'home',\n  component: Home\n}, {\n  path: '/login',\n  name: 'login',\n  component: Login\n}, {\n  path: '/signup',\n  name: 'signup',\n  component (resolve) {\n    require.ensure(['./views/signup.vue'], () => {\n      resolve(require('./views/signup.vue'));\n    });\n  }\n}, {\n  path: '/items',\n  name: 'items',\n  component (resolve) {\n    require.ensure(['./views/list.vue'], () => {\n      resolve(require('./views/list.vue'));\n    });\n  }\n}, {\n  path: '/user',\n  name: 'user',\n  component (resolve) {\n    require.ensure(['./views/user.vue'], () => {\n      resolve(require('./views/user.vue'));\n    });\n  }\n}, {\n  path: '/user/:info',\n  name: 'user_info',\n  component (resolve) {\n    require.ensure(['./views/user.vue'], () => {\n      resolve(require('./views/user.vue'));\n    });\n  }\n}, {\n  path: '/item/:id/detail',\n  name: 'detail',\n  component (resolve) {\n    require.ensure(['./views/detail.vue'], () => {\n      resolve(require('./views/detail.vue'));\n    });\n  }\n}, {\n  path: '*',\n  component: NotFound\n}];\n\nexport default routers;\n\n\n\n// WEBPACK FOOTER //\n// ./src/routers.js","import Vue from 'vue';\nimport Vuex from 'vuex';\nVue.use(Vuex);\n\nconst userStore = new Vuex.Store({\n  state: {\n    user_info: {}\n  },\n  getters: {\n    getUserInfo(state) {\n      return state.user_info;\n    }\n  },\n  mutations: {\n    setUserInfo(state, user_info) {\n      state.user_info = user_info;\n    }\n  },\n  actions: {\n    setUserInfo({ commit }, user_info) {\n      commit('setUserInfo', user_info);\n    }\n  }\n});\n\nexport default userStore;\n\n\n\n// WEBPACK FOOTER //\n// ./src/vuex/user.js"],"sourceRoot":""}